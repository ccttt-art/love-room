
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Our Wishlist</title>

<style>
*{
    box-sizing:border-box;
}

body{
    margin:0;
    background:#f4f4f4;
    font-family: "Helvetica Neue", sans-serif;
    padding:20px;
    display:flex;
    justify-content:center;
}

.container{
    background:white;
    width:100%;
    max-width:900px;
    padding:30px;
    border-radius:12px;
    box-shadow:0 5px 20px rgba(0,0,0,0.05);
}

h2{
    text-align:center;
    letter-spacing:2px;
    font-weight:600;
}
p{
    text-align:center;
    color:#666;
    font-size:14px;
    margin-top:-10px;
}

.columns{
    display:flex;
    gap:40px;
    margin-top:30px;
}

.column{
    flex:1;
}

h3{
    border-bottom:1px solid #ddd;
    padding-bottom:10px;
    font-weight:500;
}

.input-row{
    display:flex;
    gap:10px;
    margin-top:15px;
}

input{
    flex:1;
    padding:10px;
    border:1px solid #ccc;
    font-size:16px;
}

button{
    padding:10px 14px;
    background:black;
    color:white;
    border:none;
    cursor:pointer;
    font-size:14px;
}

li{
    margin:12px 0;
    display:flex;
    justify-content:space-between;
    align-items:center;
    font-size:15px;
}

.done{
    text-decoration: line-through;
    color:#999;
}

.small-btn{
    background:none;
    color:black;
    border:1px solid black;
    font-size:12px;
    padding:4px 8px;
}
/* 原本左右排列 */
.columns {
    display: flex;
    gap: 40px;
    margin-top: 30px;
}

/* 響應式：螢幕寬度小於 600px 時 */
@media (max-width: 600px) {
    .container {
        padding: 15px; /* 原本 20~30，縮小內距 */
    }

    .columns {
        flex-direction: column; /* 上下排列 */
        gap: 12px;              /* 上下間距縮小 */
    }

    .column {
        width: 100%;            /* 每欄滿寬，但不要留太多空白 */
    }

    input {
        font-size: 13px;       /* 字體略小 */
        padding: 6px;          /* 高度縮小 */
    }

    button {
        font-size: 11px;       /* 字體小 */
        padding: 6px 8px;      /* 高度縮小 */
    }

    li {
        font-size: 10px;       /* 列表文字小一點 */
        margin: 8px 0;         /* 列表間距縮小 */
    }

    .small-btn {
        font-size: 10px;
        padding: 2px 6px;
    }
}

</style>

</head>

<body>

<div class="container">
<h2>OUR WISHLIST</h2>
<p>可更新 如不想刪除按X即可 完成則點擊品項</p>

<div class="columns">

<div class="column">
<h3>CJT</h3>
<div class="input-row">
<input type="text" id="meInput">
<button onclick="addGift('me')">ADD</button>
</div>
<ul id="meList"></ul>
</div>

<div class="column">
<h3>CZI</h3>
<div class="input-row">
<input type="text" id="himInput">
<button onclick="addGift('him')">ADD</button>
</div>

<ul id="himList"></ul>
</div>

</div>
</div>

<script>

const url = "https://script.google.com/macros/s/AKfycbxr6YZlvOSVHOFKab49MSbyI4tOuXm-7cFAJR2uS0Dm7AIIaMBtWnXtSuzajJEQRGKh/exec";

function loadData(){
  fetch(url)
  .then(res=>res.json())
  .then(data=>{
      document.getElementById("meList").innerHTML="";
      document.getElementById("himList").innerHTML="";

      data.forEach(row=>{
          const type = row[0];
          const gift = row[1];
          const done = row[2];

          const li = `
            <li class="${done ? 'done' : ''}">
              <span onclick="toggle('${type}','${gift}')" style="cursor:pointer">
                ${done ? '✔ ' : ''}${gift}
              </span>
              <button class="small-btn" onclick="deleteGift('${type}','${gift}')">X</button>
            </li>`;

          if(type === "me"){
              document.getElementById("meList").innerHTML += li;
          }
          if(type === "him"){
              document.getElementById("himList").innerHTML += li;
          }
      });
  });
}

function addGift(type){
  const input = type === "me" ? 
        document.getElementById("meInput") :
        document.getElementById("himInput");

  if(input.value.trim()==="") return;

  fetch(url,{
      method:"POST",
      body:JSON.stringify({
          action:"add",
          type:type,
          gift:input.value
      })
  }).then(()=>{
      input.value="";
      loadData();
  });
}

function deleteGift(type,gift){
  fetch(url,{
      method:"POST",
      body:JSON.stringify({
          action:"delete",
          type:type,
          gift:gift
      })
  }).then(loadData);
}

function toggle(type,gift){
  fetch(url,{
      method:"POST",
      body:JSON.stringify({
          action:"toggle",
          type:type,
          gift:gift
      })
  }).then(loadData);
}

loadData();

</script>

</body>
</html>
